Resolver utility for remotefs:
------------------------------

This consist of a library libnss_rfs.so.2 which must be installed
under /lib and a little server which provide am uid or a gid for
user ort groups which are not known on the workstation.

The file /etc/nsswitch.conf must be modified for this.
Zje lines beginning with passwd: or group: must contain as
last word "rfs".

example:
--------
passwd:     files winbind rfs
shadow:     files winbind 
group:      files winbind rfs

It is important that rfs is the last entry within these lines.

How this work:
--------------

Remotefs transmit user and group name and not the uid and gid as
a regular file system. This is usefull in order to map the owner
and group correctly.

If an application want to know the uid for the user bob the
function getpwnam() or getpwnam_r() is called ftom the application.
The resolver consult then the file /etc/nsswitch.conf and call
the corresponding functions for each of the given module until
the queried value was found,

The last module is rfs and we can be sure that the user was not
found. With this knowledge we cann assign an unused uid for the
user name and return it.

The same occur for groups.

On further calls of the resolver library libnss_rfs.so.2 the
allready informations are returned.

In order to have enough security the library and the server nss:rfs
communicate via an unix socket so that only workstation local
component can use them.

The uid and gid are calculated with a hash function and will begin
with 10000. With this approach, the chance that id´s will be,
regardless the order of the queries, the same is relatively high.

Please note that these componennts was developped for the use
within a small network as used into your home network.

Using these components will allow you to use systems with
unsynchronized passwd and group files and to access the remote files,
modify them as far as the server (typically a NAS) know the
user and groups.

Test programs:
--------------

The program test shall show if the name/id resolution work.

The program rfs_nss_ctlr allow to tell a running rfs_nfs
server that a client is running, a client stop or to check
if there is a running instance of rfs_nss.


Files:
-----

The library constist at this time only of the file
rfs_nss_client.c. This is only for Linux. Implememting
of the library for other OS require OS specific code.

The server use a double linked list for holding the user and
group name as well as the corresponding id's. This is implemented
within dllist.c.
The file rfs_nss_control.c contain only a function which
check for the server and allow incrementation or decrementation
of a counter and so will allows to start the rfs_nss server on
demand. This code can be used by the rfs clients.
The main file rfs_nss.c contain the rest of the code.

Installation and /etc/nsswitch.conf
-----------------------------------

Linux:
   copy the file libnss_rfs.so.2 to /lib
FreeBSD:
   copy the file nss_rfs.so.1 to /usr/local/bin
openSolaris:
   copy the file nss:rfs.so,1 to /usr/lib

openSolaris / Linux:
   add rfs a the line beginning with passwd eg. group

FreeBSD:
   The line passwd:compat and group: compat are not good
   replace them with for example "passwd: files rfs"
