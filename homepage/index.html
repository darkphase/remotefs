<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>remotefs</title>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	</head>
	
	<body>
		<div align="center">
			<a href="http://sourceforge.net/projects/remotefs/">SourceForge page</a> 
			| <a href="http://sourceforge.net/project/showfiles.php?group_id=229928">Downloads page</a>
		</div>
		
		<br/><br/>
		
		remotefs is a network file system designed for use with home NAS. Simple to use, few dependencies, reasonable security, completely in user space.
		
		<br/><br/>
		
		The reasons i've decided to make it are a) samba isn't working for me at all b) NFS is not working well for me c) sshfs is great, but not very fast.
		I﻿n comparison with sshfs, performance on my hardware has improved roughly four times (with read/write cache enabled). 
		So if you have trouble with samba and NFS (as I do), then you may be interested in remotefs.
		
		<br/><br/>
		
		<a href="#howitworks">How it works</a><br/>
		<a href="#usecases">Typical use cases</a><br/>
		<a href="#howto">How-to</a>
		
		<br/><br/>
		
		It is provided with packages for i386 <a href="http://debian.org">Debian</a>-based systems and partialy for MIPSEL <a href="http://openwrt.org/">OpenWrt</a>-based systems.
		See <a href="http://sourceforge.net/project/showfiles.php?group_id=229928">downloads</a> section for the list of available packages.
		Build scripts are available in SVN (<a href="https://remotefs.svn.sourceforge.net/svnroot/remotefs">https://remotefs.svn.sourceforge.net/svnroot/remotefs</a>), so you could make packages for your platform(s) if you wish so.
		
		<br/><br/>
		
		<a name="howitworks"><h3>How it works:</h3></a>
		
		remotefs only translates the filesystem from remote host to your local host. To do that, the original file-owning user on the remote host is substituted by the local host user who has actually mounted an export via remotefs.
		
		<br/><br/>
		
		This is may look too simple, but this is enough for tasks performed by my home NAS. 
		My system is single-user and i'm always running remotefs as root on LAN interface (invisible from outside network). 
		So translating root's files' permissions to alex's permissions works just fine. 
		Server side has root access to filesystem and client side has alex's access, just as alex expects.
		
		<br/><br/>
		
		But if you need something more complex, like transferring a home directory from a remote host, you may define users on a per-export basis. 
		After an export is mounted on the local host, remotefs will lower its privileges to specified user and gain this user’s privileges on the remote host. 
		Since home directory usually has its user's permissions, you should not have any permission problems with this translation.
		
		<br/><br/>
		
		See typical use cases for details.
		
		<br/><br/>
		
		As an additional security measure, remotefs server could run connections with user other than root. 
		Use -u option to specify which user permissions every connection-handling process should aquire.
		For example: rfsd -h 10.0.0.1 -u rfs. 
		Right after chroot(), rfsd will lower its priveleges to user rfs. 
		Keep in mind that rfsd process will (possibly) lower its filesystem access privileges as well. 
		Main rfsd still needs to be run as root to do chroot() properly.
		
		<br/><br/>
		
		<a name="usecases"><h3>Typical use cases:</h3></a>
		
		<strong>1. Exporting part of filesystem</strong>
		
		<br/><br/><code>
		
		# export directory to anyone with ip 10.0.0.2<br/>
		/mnt/usb/store 	10.0.0.2
		
		<br/><br/>
		
		# read-only export to user authenticated as mpd<br/>
		/mnt/usb/mp3		mpd (ro) 
		
		<br/><br/>
		
		# export this directory to user authenticated as alex with r/w access<br/>
		/mnt/usb/store		alex 
		
		</code><br/><br/>
		
		Use rfspasswd utility to setup passwords.
		
		<br/><br/>
		
		<strong>2. Exporting home directory</strong>
		
		<br/><br/><code>
		
		# export alex's home to user authenticated as alexatwork<br/>
		# with access permissions of *local* user alex<br/>
		/home/alex		alexatwork (user=alex) 
		
		</code><br/><br/>
		
		<a name="howto"><h3>How-to:</h3></a>
		
		<strong>Starting the server:</strong> <code>/etc/init.d/rfsd start</code><br/><br/>
		(do not forget to put your exports into /etc/rfs-exports and set passwords with rfspasswd utility (if you need them)).
		
		<br/><br/>
		
		Available options for rfsd:
		
		<br/><br/>
		
		<code>-h 			show help<br/>
		-a [address]		listen for connections on specified address<br/>
		-p [port number]	listen for connections on specified port<br/>
		-u [username]		worker process be running with privileges of this user</code><br/><br/>
		
		Make note that rfsd with -u option will get filesystem permissions of specified user and it still needs to be initially run by root to properly do chroot(). 
		After mounting of export (chroot()), process's user id will be changed to the one specified with -u option. 
		
		<br/><br/>
		
		Default values for these options are specified in the /etc/init.d/rfsd script.
		
		<br/><br/>
		
		<strong>Exports file:</strong>
		
		<br/><br/>
		
		The file is NFS-like, except there is no subnet mask for ip-addresses. 
		Export example: <code>/tmp 127.0.0.1, alex, 10.0.0.2 (ro)</code><br/>
		"ro" (read-only) is actually the only supported option for the export.
		
		<br/><br/>
		
		<strong>Client setup:</strong>
		
		<br/><br/>
		
		Mounting export: <code>rfs 10.0.0.1:/mnt/usb/store begemoth/</code>
		
		<br/><br/>
		
		It is NFS/sshfs like. If you are not familiar with it, here is its format: “rfs host:export_name mount_point”. Host is ip-address or host name, export name is the string from exports file, mount_point  has the same meaning as in the any other mount operation.
		
		<br/><br/>
		
		Available remotefs options are:
		
		<br/><br/>
		
		<code>-o username=name        auth username<br/>
		-o rd_cache=0           disable read cache<br/>
		-o wr_cache=0           disable write cache<br/>
		-o rdwr_cache=0         disable read/write cache<br/>
		-o password=filename    filename with password for auth<br/>
		-o port=server_port     port which the server is listening to</code>
		
		<br/><br/>
		
		Since version 0.9, both read and write caches are enabled by default. You may use options -ord_cache=0, -owr_cache=0, and -ordwr_cache=0 to disable read cache, write cache or both.
		Example: <code>rfs 10.0.0.1:/mnt/usb/store begemoth/ -ordwr_cache=0</code>
		
		
		<br/><br/>
		
		Read and write caches are supposed to improve read/write performance.
		I've managed to get more than 2.5Mb/s both ways on my hardware (WL-500gP). 
		However, this performance improvement is good for large files only. 
		An application which writes small amounts of data to many files will not experience a performance increase.
		
		<br/><br/>
		
		You may also specify other FUSE option(s). 
		See <code>rfs -h</code> for details. 
		(Make note that -s options is always on and can not be turned off)
		
		<br/><br/>
		
		<hr/>
		
		If you interested in the project or feel there's a feature missing, or have suggestions or any remarks, i'd be glad to hear from you by e-mail at <a href="mailto:aleksey_t@users.sourceforge.net">aleksey_t@users.sourceforge.net</a>.
		
		<br/><br/>
		
		<div align="center">
			<a href="http://sourceforge.net/projects/remotefs/">SourceForge page</a> 
			| <a href="http://sourceforge.net/project/showfiles.php?group_id=229928">Downloads page</a>
		</div>
		
		<br/>
		
		<div align="center">
			<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=229928&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>
		</div>
	</body>
</html>
